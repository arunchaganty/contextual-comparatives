<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>Pick the best description of a numeric fact</title>

    <link rel="stylesheet" href="https://every-letter.com/cc/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://every-letter.com/cc/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="https://every-letter.com/cc/css/screen.css">

    <script src="https://every-letter.com/cc/js/jquery.min.js"></script>
    <script src="https://every-letter.com/cc/js/bootstrap.min.js"></script>
  </head>
  <body>
    <div class="container">
    
<div class="page-header">
<h1>Pick the best description of a numeric fact</h1>
</div>

<div class="col-md-12">

  <div class="panel panel-default panel-info">
    <div class="panel-heading">
      <h3 class="panel-title">Instructions</h3>
    </div>
    <div class="panel-body">
      <p>
      In each part of this task, you will be given an sentence with a highlighted number, followed by a few descriptions of what that number is equal to:
      </p>
      <span class="example">Example</span>
      <blockquote>
        A previous <b>500,000 barrel</b> a day increase in production, which went into effect Nov. 1, was widely viewed as too little too late to stop crude's run-up to near $100 a barrel.

          <div class="form-group small">
            <b>500,000 barrel</b> is about:
            <div class="checkbox">
              <label>
                <input type="checkbox" checked disabled> one third the oil produced by the world during lunch.
              </label>
            </div><div class="checkbox" disabled>
              <label>
                <input type="checkbox" checked disabled> one fourth the flow of tap water during the average lifetime of a person.
              </label>
            </div><div class="checkbox" disabled>
              <label>
                <input type="checkbox" disabled> 5 times the amount of coffee consumed by the population of Asia during the duration of lunch.
              </label>
            </div><div class="checkbox" disabled>
              <label>
                <input type="checkbox" disabled> double the coffee consumed by oil industry workers over the time it takes to graduate from college.
              </label>
            </div><div class="checkbox" disabled>
              <label>
                <input type="checkbox" disabled> None of the above make any sense.
              </label>
            </div>
          </div>
      </blockquote>

      <p>
      We would like you to pick <b>up to two</b> of these descriptions that <b>are useful in understanding the scale of the highlighted number</b>. 
      We have marked our personal preferences above. 
      </p>

      <p>
      This is an subjective task (that's why we're asking you for help!), so you could choose differently. 
      Please don't consider minor spelling errors or strict factual accuracy while making your choices.
      </p>

      <p>
      Here are some further examples with our personal choices (remember you can choose differently): 
      </p>

      <span class="example">Example</span>
      <blockquote> 
        The deal, negotiated by Turkey and Brazil, calls for Iran to ship <b>1,200 kilograms</b>, or 2,640 pounds of low enriched uranium to Turkey, where it would be stored. 

          <div class="form-group small">
            <b>1,200 kilograms</b> is about:
            <div  class="checkbox">
              <label>
                <input type="checkbox" checked disabled> half of the weight of a car.
              </label>
            </div><div  class="checkbox">
              <label>
                <input type="checkbox" disabled> 1/9 the amount of trash generated in the US in a minute by employees in the construction industry
              </label>
            </div><div  class="checkbox">
              <label>
                <input type="checkbox" disabled> the amunt of trash generated in the US by the population of Stanford in the time taken for a basketball game. 
              </label>
            </div><div  class="checkbox">
              <label>
                <input type="checkbox" disabled> None of the above make any sense.
              </label>
            </div>
          </div>
      </blockquote> 

      <span class="example">Example</span>
      <blockquote>
        Then his fortune unraveled: In 2005 he was accused of orchestrating the scheme to buy votes with monthly bribes of as much as <b>US$13,000</b> (euro9,500) per legislator.

          <div class="form-group small">
            <b>US$13,000</b> is about:
            <div class="checkbox">
              <label>
                <input type="checkbox" disabled> the salary of all the people killed by gun violence in 2016 in an hour.
              </label>
            </div><div class="checkbox">
              <label>
                <input type="checkbox" disabled> three times the salary of all of the employees in the retail industry in the blink of an eye.
              </label>
            </div>
            <div class="checkbox">
              <label>
                <input type="checkbox" disabled> the cost of employees numbering the population of California in the time taken to blink.
              </label>
            </div>
            <div class="checkbox">
              <label>
                <input type="checkbox" disabled> 1/7th the cost of employing the population of Stanford for the time taken for lunch.
              </label>
            </div><div class="checkbox">
              <label>
                <input type="checkbox" checked disabled> None of the above make any sense.
              </label>
            </div></div>
      </blockquote>

      <p>
      <b>Estimated time for task:</b> 2 minutes.
      </p>
      <p>
      <b>Tip:</b> Using the <span style="font-family:monospace;">Tab</span> and <span style="font-family:monospace;">Space</span> keys should let you go through the interface much faster. 
      </p>
      <p>
      <b>Note about evaluation:</b> We have included a few HITs with answers that are <em>very obviously</em> right/wrong. We will manually inspect your work based on your responses to these.
      </p>
    </div>
  </div>


  <div class="panel panel-default panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">Task</h3>
    </div>

    <input id="tasks" type="hidden" name="tasks" value="${tasks}">
    <input type="hidden" name="task_index" value="${task_index}">
    <input id="responses" type="hidden" name="responses" value="">

    <div id="tasklist" class="panel-body">
      <div id="choice-template" class="checkbox hidden">
        <label>
          <input id="response-@@id@@-@@response_id@@" type="checkbox"> @@choice_gloss@@
        </label>
      </div>
      <div id="task-template" class="panel panel-default hidden task">
        <div class="panel-heading">
          <h4 class="panel-title">Part @@j@@</h4>
        </div>

        <div class="panel-body">
          <!-- Consider the following combination of statements and describe their combination. -->
          <blockquote>
            @@sentence_gloss@@
          </blockquote>

          <div class="form-group">
            <b>@@mention_gloss@@</b> is about:
          </div>
        </div>

        <div class="alert alert-danger hidden">
          Please ensure that either "None of the above" is checked or between one and two descriptions are checked.
        </div>
      </div>
    </div>

    <div class="panel-body">
      <div class="alert alert-danger hidden" id="errorBox">
        Some responses were not correctly filled.
      </div>
      <div class="alert alert-success hidden" id="successBox">
        Thank you for your input!
      </div>

      <div class="form-group">
        <label for="comments">Feedback on task</label>
        <input type="text" class="form-control" name="comments" id="comments" placeholder="Please let us know if you have suggestions or faced any issues with this HIT.">
      </div>

      <input name="submit" class="btn btn-primary" type="submit" id="submitButton" value="Submit" />
    </div>

  </div>

</div>

    <script type="text/javascript">
function parseTasks() {
  var tasks = $('#tasks').attr('value').split('\t');
  for(var i = 0; i < tasks.length; i++) {
    tasks[i] = jQuery.parseJSON(tasks[i]);
  }
  return tasks;
}
var tasks = parseTasks();

  // Aggregate output.
function validateInputs() {
  // Check that the input has been inserted.
  var success = true;
  var values = [];
  for (var i = 0; i < tasks.length; i++) {
    var task = tasks[i];
    // Get task div
    var div = $("#task-"+task.id);
    // Pull out all 
    var inputs = div.find("input:checked");
    var responses = new Array(inputs.length);
    var hasNone = false;
    for(var j = 0; j < inputs.length; j++) {
      var response_id = $(inputs[j]).attr("id").split("-",3)[2];
      if (response_id == "") {
        response_id = "-1";
        hasNone = true;
      }
      responses[j] = parseInt(response_id);
    }

    // Make sure there are enough checked box.
    if (inputs.length == 0 || inputs.length > 2 || (hasNone && inputs.length > 1)) {
      // Highlight div focus the first time.
      if (success) {
        $(location).attr('hash', '#'+div.attr('id'));
      }
      div.addClass('panel-danger');
      div.removeClass('panel-default');
      div.children('div.alert-danger').removeClass("hidden");
      success = false;
    } else {
      div.removeClass('panel-danger');
      div.addClass('panel-default');
      div.children('div.alert-danger').addClass("hidden");

      values.push({"task_id" : task.id, "responses" : responses});
    }
  }

  if (success) {
    $("#errorBox").addClass("hidden");
    $("#successBox").removeClass("hidden");

    $('#responses').attr('value', JSON.stringify(values));
  } else {
    $("#errorBox").removeClass("hidden");
    $("#successBox").addClass("hidden");
  }

  return success;
}

function emptyChoice(mention_id) {
  return {"mention_id":mention_id, "response_id" : -1, "gloss": "None of the above are useful."};
}

function addChoice(choice) {
  var div = $("#choice-template").clone();
  div.html(div.html()
      .replace(/@@id@@/g, choice.task_id)
      .replace(/@@response_id@@/g, choice.response_id)
      .replace(/@@choice_gloss@@/g, choice.gloss));
  div.removeAttr("id");
  div.removeClass("hidden");
  return div;
}

// Create a copy of the template class and replace key variables.
function addTask(i, task) {
  var div = $("#task-template").clone();

  // Replace @@i@@ and @@prompt@@.
  div.attr("id","task-" + task.id);
  div.html(div.html()
      .replace(/@@i@@/g, i)
      .replace(/@@j@@/g, i+1)
      .replace(/@@id@@/g, task.id)
      .replace(/@@sentence_gloss@@/g, task.sentence_gloss)
      .replace(/@@mention_gloss@@/, task.mention_gloss));
  var choice_list = $(div.find('div.form-group')[0]);
  for (var i = 0; i < task.choices.length; i++) {
    choice_list.append(addChoice(task.choices[i]));
  }
  choice_list.append(addChoice(emptyChoice(task.mention_id)));
  // Make visible.
  div.removeClass("hidden");
  // Add to the tasklist
  $("#tasklist").append(div);
}

$(document).ready(function() {
  // Render the tasks.
  for(var i = 0; i < tasks.length; i++) {
    addTask(i, tasks[i]);
  }

  // Capture the submit button.
  $('#submitButton').click(validateInputs);
});
    </script>



    </div>
  </body>
</html>

